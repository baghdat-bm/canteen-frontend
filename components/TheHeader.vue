<template>
  <header class="flex items-center justify-between px-6 py-2 bg-white border-b-2 border-gray-200">
    <div class="flex items-center">
      <button @click="uiStore.toggleSidebar()" class="text-gray-500 focus:outline-none lg:hidden">
        <Menu class="w-6 h-6" />
      </button>
      <button @click="uiStore.toggleSidebar()" class="text-gray-500 focus:outline-none hidden lg:block">
        <PanelLeftClose v-if="uiStore.isSidebarOpen" class="w-6 h-8" />
        <PanelRightClose v-else class="w-6 h-8" />
      </button>
    </div>

    <div class="flex items-center space-x-4">
      <span class="text-sm font-semibold text-gray-700">{{ authStore.schoolName + authStore.warehouseName }}</span>
      <span class="text-sm font-medium text-gray-600">{{ authStore.getUserName }}</span>

      <div class="relative">
        <select v-model="languageModel" class="p-1 border rounded-md text-sm cursor-pointer">
          <option value="kz">ðŸ‡°ðŸ‡¿ KZ</option>
          <option value="ru">ðŸ‡·ðŸ‡º RU</option>
        </select>
      </div>
    </div>
  </header>
</template>

<script setup>
import { computed } from 'vue'; // <-- Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ 'computed' Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½
import { Menu, PanelLeftClose, PanelRightClose } from 'lucide-vue-next';
import { useAuthStore } from '~/stores/auth';
import { useUiStore } from '~/stores/ui';

const authStore = useAuthStore();
const uiStore = useUiStore();

// --- â†“â†“â†“ ÐÐžÐ’Ð«Ð™ "ÐŸÐ£Ð›Ð•ÐÐ•ÐŸÐ ÐžÐ‘Ð˜Ð’ÐÐ•ÐœÐ«Ð™" ÐŸÐžÐ”Ð¥ÐžÐ” â†“â†“â†“ ---

const i18n = useI18n();

// Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ `computed`-ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð¾, ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ðµ Ð±ÑƒÐ´ÐµÑ‚ Ð½Ð°ÑˆÐ¸Ð¼ Ð¿Ð¾ÑÑ€ÐµÐ´Ð½Ð¸ÐºÐ¾Ð¼
const languageModel = computed({
  // `get` Ð±ÑƒÐ´ÐµÑ‚ Ð²ÑÐµÐ³Ð´Ð° Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°Ñ‚ÑŒ ÐÐšÐ¢Ð£ÐÐ›Ð¬ÐÐžÐ• Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ ÑÐ·Ñ‹ÐºÐ°
  get() {
    return i18n.locale.value;
  },
  // `set` Ð±ÑƒÐ´ÐµÑ‚ Ð²Ñ‹Ð·Ñ‹Ð²Ð°Ñ‚ÑŒ ÐžÐ¤Ð˜Ð¦Ð˜ÐÐ›Ð¬ÐÐ£Ð® Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ Ð´Ð»Ñ ÑÐ¼ÐµÐ½Ñ‹ ÑÐ·Ñ‹ÐºÐ°
  set(newLocale) {
    i18n.setLocale(newLocale);
  }
});

// Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ onLanguageChange Ð±Ð¾Ð»ÑŒÑˆÐµ Ð½Ðµ Ð½ÑƒÐ¶Ð½Ð°, v-model Ð´ÐµÐ»Ð°ÐµÑ‚ Ð²ÑÐµ Ð·Ð° Ð½Ð°Ñ.
</script>